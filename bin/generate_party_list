#!/usr/bin/ruby

# Produce initial JSON for a hard-coded list of parties

require 'json'

info = {
  'Christian Democratic Parliamentary Group' => 'kd',
  'Finnish Centre Party' => 'kesk',
  'National Coalition Party' => 'kok',
  'Parliamentary group Change 2011' => 'm11',
  'Swedish Parliamentary Group' => 'r',
  'The Finns Party Parliamentary Group' => 'ps',
  'The Social Democratic Parliamentary Group' => 'sd',
  'Left Alliance' => 'vas',
  'Green Parliamentary Group' => 'vihr',
  'Left Faction Parliamentary Group' => 'vr',

  'Parliamentary group Mustajärvi' => 'emus',
  'Parliamentary group Yrttiaho' => 'eyrt',
  'Parliamentary group Virtanen' => 'evir',

  # Manually added based on Finnish versions
  "Patriotic People's Movement" => 'ikl',
  "Young Finnish Party" => 'nuorsom',
  "Liberals" => 'lkp',
  "Democratic Alternative" => 'deva',
  "Finnish Socialist Workers' Party" => 'sstp',
  "Socialist Workers and Small Farmers Group" => 'stpv',
}

parties = info.each_with_object({}) { |(name, abbrev), h| 
  h[abbrev] = {
    :classification => "party",
    :id       => "popit.eduskunta/party/#{abbrev}",
    :name       => name,
    :other_names  => [
      {
        :name  => name,
        :label => 'en.eduskunta.fi',
      },
    ],
  }
}

parties['ps'][:other_names][0][:start_date] = '2011-08-21'
parties['ps'][:other_names].push({
  :name => 'True Finns Party',
  :start_date => '1995-10-26',
  :end_date => '2011-08-20',
}, {
  :name => 'Finnish Rural Party Parliamentary Group',
  :end_date => '1995-10-25',
});
  
parties['kd'][:other_names][0][:start_date] = '2001-06-01'
parties['kd'][:other_names].push({
  :name => 'Finnish Christian Union Parliamentary Group',
  :end_date => '2001-05-30',
})

# http://fi.wikipedia.org/wiki/Eduskuntaryhm%C3%A4
fi = { 
  'Ruotsalainen eduskuntaryhmä' => 'r',
  'Sosialidemokraattinen eduskuntaryhmä' => 'sd',
  'Vihreä eduskuntaryhmä' => 'vihr',
  'Nuorsuomalainen puolue' => 'nuorsom',

  # Keskustan eduskuntaryhmä (Maalaisliiton eduskuntaryhmä - 31.01.1965)
  'Keskustan eduskuntaryhmä' => 'kesk',
  'Maalaisliiton eduskuntaryhmä' => 'kesk', 
  # Vasemmistoliiton eduskuntaryhmä (Suomen kansan demokraattisen liiton eduskuntaryhmä - 31.12.1990)
  'Vasemmistoliiton eduskuntaryhmä' => 'vas',
  'Suomen kansan demokraattisen liiton eduskuntaryhmä' => 'vas', 
  # Kansallisen kokoomuksen eduskuntaryhmä (Suomalainen puolue - 08.12.1918)
  'Kansallisen kokoomuksen eduskuntaryhmä' => 'kok',
  'Suomalainen puolue' => 'kok', 
  # Liberaalisen kansanpuolueen eduskuntaryhmä = Kansallinen edistyspuolue - 20.07.1951, Suomen kansanpuolue 21.07.1951 - 31.05.1965
  'Kansallinen edistyspuolue' => 'lkp',
  'Suomen kansanpuolue' => 'lkp',
  'Liberaalisen kansanpuolueen eduskuntaryhmä' => 'lkp',
  # Perussuomalaisten eduskuntaryhmä (Suomen maaseudun puolueen eduskuntaryhmä - 25.10.1995)
  'Perussuomalaisten eduskuntaryhmä' => 'ps',
  'Suomen maaseudun puolueen eduskuntaryhmä' => 'ps',
  # Kristillisdemokraattinen eduskuntaryhmä (Kristillisen liiton eduskuntaryhmä - 30.05.2001) 
  'Kristillisdemokraattinen eduskuntaryhmä' => 'kd',
  'Kristillisen liiton eduskuntaryhmä' => 'kd',

  'Työväen ja pienviljelijäin vaaliliitto' => 'stpv',
  'Työväen ja pienviljelijäin puolue' => 'stpv',
  'Demokraattinen vaihtoehto' => 'deva',
  'Suomen sosialistinen työväenpuolue' => 'sstp',
  'Isänmaallinen kansanliike' => 'ikl',
}

fi.each { |name, abbrev|
  # warn "Adding #{abbrev} / #{name}"
  parties[abbrev][:other_names].push({
    :name => name,
    :label => 'fi.eduskunta.fi',
  })
}

puts JSON.pretty_generate(parties.values)
