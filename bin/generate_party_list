#!/usr/bin/ruby

#Â Produce initial JSON for a hard-coded list of parties

require 'json'

info = {
  'Christian Democratic Parliamentary Group' => 'kd',
  'Finnish Centre Party' => 'kesk',
  'National Coalition Party' => 'kok',
  'Parliamentary group Change 2011' => 'm11',
  'Swedish Parliamentary Group' => 'r',
  'The Finns Party Parliamentary Group' => 'ps',
  'The Social Democratic Parliamentary Group' => 'sd',
  'Left Alliance' => 'vas',
  'Green Parliamentary Group' => 'vihr',
  'Left Faction Parliamentary Group' => 'vr',

  'Parliamentary group MustajÃ¤rvi' => 'emus',
  'Parliamentary group Yrttiaho' => 'eyrt',
  'Parliamentary group Virtanen' => 'evir',
}

parties = info.each_with_object({}) { |(name, abbrev), h| 
  h[abbrev] = {
    :classification => "party",
    :id       => "popit.eduskunta/party/#{abbrev}",
    :name       => name,
    :other_names  => [
      {
        :name  => name,
        :label => 'en.eduskunta.fi',
      },
    ],
  }
}

parties['ps'][:other_names][0][:start_date] = '2011-08-21'
parties['ps'][:other_names].push({
  :name => 'True Finns Party',
  :start_date => '1995-10-26',
  :end_date => '2011-08-20',
}, {
  :name => 'Finnish Rural Party Parliamentary Group',
  :end_date => '1995-10-25',
});
  
parties['kd'][:other_names][0][:start_date] = '2001-06-01'
parties['kd'][:other_names].push({
  :name => 'Finnish Christian Union Parliamentary Group',
  :end_date => '2001-05-30',
})

puts JSON.pretty_generate(parties.values)
