#!/usr/bin/ruby

#Â Join individual person json files into one

require 'json'

path = ARGV[0] or raise "Usage: #{$0} <dir>"
list = Dir["#{path}/*.json"].sort_by { 
	|name| name.scan(/\d+/).first.to_i 
}.map { 
	|name| JSON.parse(File.read(name)) 
}
warn "#{list.count} entries"
puts JSON.pretty_generate( list );

